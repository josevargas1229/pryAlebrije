<h1 class="checkout-title">Finalizar Compra</h1>

<mat-card class="checkout-container">
  <form #checkoutForm="ngForm" (ngSubmit)="procesarPedido()" class="checkout-form">

    <!-- ðŸ›’ Resumen del carrito -->
    <div class="cart-preview" *ngIf="cartItems.length > 0">
      <h2>Resumen de Productos</h2>
      <div class="cart-items">
        <mat-card class="cart-item" *ngFor="let item of cartItems">
          <div class="product-details-container">
            <img [src]="item.imagen" alt="{{ item.nombre }}" class="product-image">
            <div class="product-info">
              <p><strong>Nombre:</strong> {{ item.tipoProducto }} {{ item.nombre }}</p>
              <p><strong>Talla:</strong> {{ item.talla }}</p>
              <p><strong>Color:</strong> {{ item.color }}</p>
              <p><strong>Precio:</strong> {{ item.precio | currency }}</p>
              <p><strong>Cantidad:</strong> {{ item.cantidad }}</p>
              <input type="hidden" [value]="item.talla_id">
              <input type="hidden" [value]="item.color_id">
            </div>
          </div>
        </mat-card>
      </div>
    </div>

    <!-- âœ… BotÃ³n de confirmaciÃ³n manual (si no se usa pasarela)
    <button mat-button color="primary" class="finalizar-compra" type="submit" [disabled]="checkoutForm.invalid">
      Confirmar Pedido
    </button> -->
     <!-- ðŸ’³ BotÃ³n de Mercado Pago -->
<div *ngIf="cartItems.length > 0" class="mp-container">
  <div id="mercado-pago-button"></div>
</div>


  </form>

  <!-- ðŸ’³ BotÃ³n de PayPal -->
  <div [ngClass]="{ 'paypal-visible': cartItems.length > 0 }">
    <div id="paypal-button-container"></div>
  </div>



</mat-card>

<div class="legal-settings-container">
  <h2>Administrar Documentos Legales</h2>

  <!-- Tabs para seleccionar el tipo de documento -->
  <div class="tabs">
    <button (click)="changeSelectTab('terminos')" [class.active]="selectedTab === 'terminos'">Términos y Condiciones</button>
    <button (click)="changeSelectTab('privacidad')" [class.active]="selectedTab === 'privacidad'">Política de Privacidad</button>
    <button (click)="changeSelectTab('deslinde')" [class.active]="selectedTab === 'deslinde'">Deslinde Legal</button>
  </div>

  <!-- Subir nuevo documento -->
  <input type="file" (change)="onFileSelected($event)" />
  <p class="file-format-note">* Solo se permiten documentos de tipo .docx</p>
  <button (click)="uploadDocument()">Subir Nuevo Documento</button>

  <!-- Mostrar documentos guardados -->
  <div *ngIf="savedDocuments[selectedTab]?.length > 0">
    <h3>Documentos Guardados</h3>
    <mat-accordion>
      <mat-expansion-panel *ngFor="let doc of savedDocuments[selectedTab]">
        <mat-expansion-panel-header>
          <mat-panel-title class="document-title">
            <span class="doc-info">Tipo: {{ doc.tipo }}</span>
            <span class="doc-info">Subido: {{ doc.fecha_creacion }}</span>
            <span class="doc-info">Vigente: {{ doc.vigente ? 'Sí' : 'No' }}</span>
          </mat-panel-title>
          <mat-panel-description>
            Haga clic para ver el contenido
          </mat-panel-description>
        </mat-expansion-panel-header>

        <div>
          <div *ngIf="documentToEdit?.id === doc.id; else displayContent">
            <textarea [(ngModel)]="documentToEdit.contenido_html" rows="10" cols="50">{{ doc.contenido }}</textarea>
            <button (click)="saveEditedDocument()">Guardar Cambios</button>
            <button (click)="cancelEdit()">Cancelar</button>
          </div>
          <ng-template #displayContent>
            <p [innerHTML]="doc.contenido_html"></p>
            <div class="document-actions">
              <button (click)="editDocument(doc)">Editar</button>
            </div>
          </ng-template>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
  </div>

  <div class="no-documents" *ngIf="!savedDocuments[selectedTab]?.length">
    <p>No hay documentos guardados para esta sección.</p>
  </div>
</div>

<div class="profile-container">
  <header class="profile-header">
    <h2>Configuración del perfil de la empresa</h2>
  </header>

  <div class="profile-content">
    <!-- Sección de Logo -->
    <div class="logo-section">
      <div class="logo-container" [class.has-logo]="companyProfile?.logo">
        <img *ngIf="companyProfile?.logo" [src]="companyProfile.logo" alt="Logo de la Empresa" class="logo-preview"/>
        <div *ngIf="!companyProfile?.logo" class="logo-placeholder">
          <span class="material-icons">business</span>
        </div>
      </div>
      <div class="logo-upload">
        <label for="logo" class="upload-label">
          <span class="material-icons">cloud_upload</span>
          Subir logo
        </label>
        <input type="file" id="logo" (change)="onFileChange($event)" class="file-input" accept="image/*"/>
      </div>
    </div>

    <!-- Formulario -->
    <form [formGroup]="companyForm" (ngSubmit)="onSubmit()" class="profile-form">
      <div class="form-grid">
        <mat-form-field appearance="outline">
          <mat-label>Nombre de la empresa</mat-label>
          <input matInput formControlName="nombre" placeholder="Ingrese el nombre"/>
          <mat-icon matSuffix>business</mat-icon>
          <mat-error *ngIf="companyForm.get('nombre')?.hasError('required')">
            El nombre de la empresa es obligatorio.
          </mat-error>
          <mat-error *ngIf="companyForm.get('slogan')?.hasError('maxlength')">
            El eslogan no puede tener más de 100 caracteres.
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Eslogan</mat-label>
          <input matInput formControlName="slogan" placeholder="Ingrese el eslogan"/>
          <mat-icon matSuffix>format_quote</mat-icon>
          <mat-error *ngIf="companyForm.get('slogan')?.hasError('maxlength')">
            El eslogan no puede tener más de 100 caracteres.
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Dirección</mat-label>
          <input matInput formControlName="direccion" placeholder="Ingrese la dirección"/>
          <mat-icon matSuffix>location_on</mat-icon>
          <mat-error *ngIf="companyForm.get('direccion')?.hasError('required')">
            La dirección es obligatoria.
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Teléfono</mat-label>
          <input matInput formControlName="telefono" placeholder="Ingrese el teléfono"/>
          <mat-icon matSuffix>phone</mat-icon>
          <mat-error *ngIf="companyForm.get('telefono')?.hasError('required')">
            El teléfono es obligatorio.
          </mat-error>
          <mat-error *ngIf="companyForm.get('telefono')?.hasError('pattern')">
            El teléfono debe tener 10 dígitos.
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Correo electrónico</mat-label>
          <input matInput formControlName="email" placeholder="ejemplo@empresa.com"/>
          <mat-icon matSuffix>email</mat-icon>
          <mat-error *ngIf="companyForm.get('email')?.hasError('required')">
            El correo electrónico es obligatorio.
          </mat-error>
          <mat-error *ngIf="companyForm.get('email')?.hasError('email')">
            Debe ingresar un correo electrónico válido.
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Red social</mat-label>
          <input matInput formControlName="redSocial" placeholder="URL de la red social"/>
          <mat-icon matSuffix>share</mat-icon>
          <mat-error *ngIf="companyForm.get('redSocial')?.hasError('required')">
            La URL de la red social es obligatoria.
          </mat-error>
          <mat-error *ngIf="companyForm.get('redSocial')?.hasError('pattern')">
            Ingrese una URL válida que comience con http:// o https://
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-actions">
        <button mat-raised-button color="primary" type="submit" [disabled]="!companyForm.valid">
          <mat-icon>save</mat-icon>
          Guardar cambios
        </button>
      </div>
    </form>

    <!-- Información del Perfil -->
    <div class="profile-summary" *ngIf="companyProfile">
      <h3>Información Actual</h3>
      <mat-card>
        <mat-card-content>
          <div class="summary-grid">
            <div class="summary-item">
              <mat-icon>business</mat-icon>
              <span class="label">Nombre:</span>
              <span class="value">{{ companyProfile?.nombre }}</span>
            </div>
            <div class="summary-item">
              <mat-icon>format_quote</mat-icon>
              <span class="label">Eslogan:</span>
              <span class="value">{{ companyProfile?.slogan }}</span>
            </div>
            <div class="summary-item">
              <mat-icon>location_on</mat-icon>
              <span class="label">Dirección:</span>
              <span class="value">{{ companyProfile?.direccion }}</span>
            </div>
            <div class="summary-item">
              <mat-icon>phone</mat-icon>
              <span class="label">Teléfono:</span>
              <span class="value">{{ companyProfile?.telefono }}</span>
            </div>
            <div class="summary-item">
              <mat-icon>email</mat-icon>
              <span class="label">Email:</span>
              <span class="value">{{ companyProfile?.email }}</span>
            </div>
            <div class="summary-item">
              <mat-icon>share</mat-icon>
              <span class="label">Red Social:</span>
              <a [href]="companyProfile?.redSocial" target="_blank" class="value link">
                {{ companyProfile?.redSocial }}
              </a>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>